{% extends "base.html" %} {% block content %}
<div class="upload-container">
  <form id="upload-form" action="/" method="post" enctype="multipart/form-data">
    <div class="upload-area" id="drop-zone">
      <div class="upload-placeholder" id="upload-placeholder">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="48"
          height="48"
          viewBox="0 0 24 24"
          fill="none"
          stroke="#4a90e2"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
          <polyline points="17 8 12 3 7 8"></polyline>
          <line x1="12" y1="3" x2="12" y2="15"></line>
        </svg>
        <h3>Select your Bank PDFs by dragging them here</h3>
        <p>or</p>
        <label for="file-input" class="browse-btn">Browse Files</label>
        <input
          type="file"
          id="file-input"
          name="file"
          accept=".pdf"
          multiple
          hidden
        />
      </div>
    </div>
    <button type="submit" class="submit-btn" id="submit-btn" disabled>
      Prepare Your Spreadsheet
    </button>
  </form>
  <div class="explanation-section">
    <h3>How It Works</h3>
    <p>
      This tool securely converts your bank statement PDFs into organized
      spreadsheets (CSV format) right in your browser. Simply upload your
      statements, and our system automatically extracts transaction data, cleans
      it up, and structures it into columns for Date, Description, Reference,
      Amount, and Balance. The entire process happens in memory - your financial
      documents are never stored on our servers, ensuring complete privacy and
      security. Download your formatted data instantly for easy analysis in
      Excel, Google Sheets, or any accounting software.
    </p>
  </div>
  {% if converted_files %}
  <div class="uploaded-files">
    <h2>âœ… Your spreadsheets are ready! Click to Download</h2>
    <ul>
      {% for file in converted_files %}
      <li>
        <span class="file-name">{{ file.original_name }}</span>
        <a
          href="{{ url_for('download_file', file_index=loop.index0) }}"
          class="download-btn"
          title="Download {{ file.filename }}"
        >
          <span class="download-text">Download CSV</span>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="18"
            height="18"
            viewBox="0 0 24 24"
            fill="none"
            stroke="#27ae60"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="7 10 12 15 17 10"></polyline>
            <line x1="12" y1="15" x2="12" y2="3"></line>
          </svg>
        </a>
      </li>
      {% endfor %}
    </ul>
  </div>
  {% endif %}
</div>

{% endblock %}
